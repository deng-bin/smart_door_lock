#include "debug.h"
#include "uart.h"

void as608_init()
{
    Uart7_Init();
}

/*从传感器上读入图像存于图像缓冲区*/
void PS_GetImage()
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x03,0x01,0x00,0x05};
    uart7_send_string(string,12);
}

void PS_GenChar(u8 buffer)
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x04,0x02,buffer,0x00,0x01+0x00+0x04+0x02+buffer};
    uart7_send_string(string,13);
}

void PS_RegModel()
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x03,0x05,0x00,0x09};
    uart7_send_string(string,12);
}

void PS_StoreChar(u8 addr)
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x06,0x06,0x02,0x00,addr,0x00,0x01+0x00+0x06+0x06+0x02+0x00+addr};
    uart7_send_string(string,15);

}

void PS_Search()
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x08,0x04,0x02,0x00,0x00,0x00,0xff,0x01,0x0e};
    uart7_send_string(string,17);
}

void PS_Empty()
{
    u8 string[]={0xef,0x01,0xff,0xff,0xff,0xff,0x01,0x00,0x03,0x0d,0x00,0x11};
    uart7_send_string(string,12);
}

/*初始化*/
void As608_Gpio_Init()
{
    GPIO_InitTypeDef  GPIO_InitStructure;
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;
    GPIO_Init(GPIOA, &GPIO_InitStructure);
}
